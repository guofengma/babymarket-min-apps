<!--mom.wxml-->
<import src='/pages/home/tab-layout/tab-layout.wxml' />
<import src='/pages/mom/item/item.wxml' />
<import src='/pages/mom/type/type.wxml' />
<import src='/components/search-field/search-field.wxml' />
<import src='/components/empty-view/empty-view.wxml' />

<view class="mom-box">
    <view class="top">
        <template is="tab-layout" data="{{items:oneSortData,currentTab}}" />
    </view>
    <view class="swiper-view">
        <swiper class="swiper-container" bindchange="onTabChangeListener" current="{{currentTab}}">
            <block wx:for="{{oneSortData}}" wx:key="unique">
                <swiper-item>
                    <scroll-view class="scroll" scroll-y>
                        <!--热帖所有贴-->
                        <view wx:if="{{momtype==0}}" class="hot">
                            <view wx:if="{{momList.length>0}}">
                                <block wx:for="{{momList}}" wx:key="unique">
                                    <template is="mom-item" data="{{item,index:index}}"></template>
                                </block>
                            </view>
                            <!--无数据-->
                            <view wx:else class="no-data">
                                <template is="empty-view" data="{{title}}"></template>
                            </view>
                        </view>

                        <!--所有圈-->
                        <view wx:if="{{momtype==1}}" class="hot">
                            <block wx:for="{{typeList}}" wx:key="unique">
                                <template is="mom-type" data="{{item,index:index}}"></template>
                            </block>
                        </view>

                        <!--搜帖子-->
                        <view wx:if="{{momtype==2}}" class="hot">
                            <view class="search">
                                <template is="search-field"></template>
                                <!--搜帖子的记录-->
                                <view wx:if="{{isRecord}}">
                                    <view class="search-text">大家都在搜：</view>
                                    <view class="search-list">
                                        <block wx:for="{{recordList}}" wx:key="unique">
                                            <view class="search-record">{{item.record}}</view>
                                        </block>
                                    </view>
                                </view>
                                <!--搜帖子的结果记录-->
                                <view wx:else>
                                    <view wx:if="{{hasSearchData}}">
                                        <block wx:for="{{momList}}" wx:key="unique">
                                            <template is="mom-item" data="{{item,index:index}}"></template>
                                        </block>
                                    </view>
                                    <!--无数据-->
                                    <view wx:else class="no-data">
                                        <template is="empty-view" data="{{title}}"></template>
                                    </view>
                                </view>
                            </view>
                        </view>
                    </scroll-view>
                </swiper-item>
            </block>
        </swiper>
    </view>
</view>